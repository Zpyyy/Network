论文主要完成了网络性能测试仪中RFC2544测试标准协议的设计与实现。
首先,介绍了网络通信协议及用于评测网络互连设备性能的RFC2544测试标准;
其次,分析了网络性能测试仪功能需求与性能指标,根据该指标提出了一种基于上位机/嵌入式处理器/高性能逻辑器件的新型网络性能测试系统方案;
然后,基于网络性能测试系统总方案,对RFC2544测试标准的算法方案与上位机软件方案进行设计,并通过Python语言实现;最后,对所设计的网络性能测试仪RFC2544功能进行实验验证与测试应用。
实验结果表明,网络性能测试仪RFC2544功能各项指标均符合设计要求,具有很强的工程应用价值。 
RFC2544的算法设计


ＲＦＣ２５４４提供了一个对网络设备测试的基准，它规定了一系列的测试过程和方法，
使得服务提供商和用户间可以在同一个基准下，对测试的实施和结果达成共识［３（）］。
ＲＦＣ２５４４标准要求对一系列的帧长（６４、１２８、２５６、５１２、７６８、１０２４、１２８０、１５１８字节）
在一定的时间内，按一定的数目进行测试［３３］。其主要测试项有吞吐量（Ｔｈｒｏｕｇｈｐｕｔ）
测试，延时（Ｌａｔｅｎｃｙ）测试，桢丢失（ＬｏｓｓＲａｔｅ）测试和背靠背（Ｂａｃｋｔｏｂａｃｋ）测试，
此外还规定了系统恢复（Ｓｙｓｔｅｍｒｅｃｏｖｅｒｙ）测试和复位测试（Ｒｅｓｅｔ）。它通常的测试性
能主要包括：吞吐量，时延，丢包率，背靠背等，并对性能参数进行了具体规定［３６］。
１．吞吐量测试
定义：被测设备在不发生丢包的情况下，所能达到的最大转发速率，单位为（Ｍｂ／ｓ，
位／ｓ和线速百分比）。
作用：吞吐量性能反映被测设备在不丢包的情况下，所能转发的最大数据流量，
是网络性能测试的一项重要指标，吞吐量的大小直接关系到测试设备的产品分级［３７］。
４
４
２．丢包率测试
定义：在网络具有负载时，被测设备由于资源条件有限而未能转发的数据包数占
应转发包数的比例。
作用：丢包率性能反映了被测设备所能承受负载的能力。
３．时延测试
定义：时延是数据帧进入离开网络互连设备所耗费的时间。通常分为：存储转发
时延和直通交换时延。
作用：时延性能反映了被测设备对数据报的处理能力。
４．背靠背测试
定义：测试设备以其所能产生的最大速率向被测设备发送一定长度的测试包，并
在发送时改变所发送测试包的数目，直至被测设备可以将测试设备发送的数据包全部
转发，此时的测试包数目即被测设备的背靠背值［３８］。
作用：背靠背性能用于衡量具有存储转发能力的被测试设备的最大存贮转发能力。
ＲＦＣ２５４４协议针对网络性能测试定义了以下两种结构：单机结构与双机结构。
１．单机结构
单机结构是ＲＦＣ２５４４测试标准给出的一种理想的测试结构。它通过一台同时具有
发送和接收端口的高性能测试设备来进行测试。测试时，高性能测试设备将数据流发
送到被测设备的接收端口，经过被测设备处理后发送回测试设备，根据发送和接收情
况进行性能评估［３９］。
２．双机结构
双机结构是将单机结构中的测试设备按功能分为两部分：发送端和接收端。双机
结构测试时需要其他设备控制测试同步问题，测试过程与单机测试类似。



由于本文中主要工作与网络性能测试仪上位机软件部分设计实现相关，因此着重
介绍软件方案的设计。
进行上位机软件设计时，首先应该对上位机的功能需求进行分析，才能更好的
完成网络性能测试仪总体测试需求。本文设计的网络性能测试仪上位机软件，预期完
成如表３．２所示功能：


表３．２上位机软件功能需求



序号

功能需求



１开发Ｗｉｎｄｏｗｓ系统下网络性能测试仪用户界面，完成基本架构



２实现基于２－３层网络协议的发送报文、捕获报文、统计结果等功能设置



３开发拫文构造设置界面，控制ＦＰＧＡ按指定设置发送报文



４开发抓包模式设置界面，实现按控制收发方向过滤抓包，按ＣＲＣ／ＦＣＳ错误过滤抓包，

按字节偏差和范围过滤抓包



５开发速率动态显示界面，方便用户实时查看收发速率、收发包数、发送丢包数与接

收错误包数

６开发基于ＲＦＣ２５４４基准测试界面，包括吞吐量，时延，丢包率，背靠背四个网络性

能指标的高精度测试，并给出简洁可靠测试结果



７开发其他测试基准方法测试功能，基于ＲＦＣ２５４４测试标准开发方案进行设计实现



主要开发思路是在ＰＣ终端进行程序的编写、编译及调试。ＰＣ端利用
ＳｅｃｕｒｅＣＲＴ进行ｔｅｌｎｅｔ远程登录ＰｏｗｅｒＰＣ，进行嵌入式开发；利用ＣｉｓｃｏＴＦＴＰ进行上
位机和ＰｏｗｅｒＰＣ之间ｔｆｔｐ（ＴｒｉｖｉａｌＲｌｅＴｒａｎｓｆｅｒＰｒｏｔｏｃｏｌ，简单文件传输协议）文件传
输




分别对这三个标准测试模块的用户界面、功
能测试算法、功能测试结果进行设计与实现。在实现的过程中，需要调用基础功能模
块，完成构造相应的测试报文命令。通过解析计算下位机回送报文内容，将功能测试
＜结果显示在用户界面上



在调用ASIC芯片SDK的API接口基础之上,开发出二层交换子系统的五个业务功能:QOS(Quality of Service,质量与服务)、TM(Traffic Management,流量管理)、组播、FDB(Forwarding Data Base,转发数据库)和CPU报文管理。这五个模块是相互独立的,明确并设计各个模块所在的层次之间的关系。同时相应地完成ASIC芯片对数据帧进行的流水处理操作。最后根据用户的实际需求,在本地模拟出设备的组网和业务环境。
